<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TecnoPIA - Dashboard del Docente</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .sidebar {
            background: linear-gradient(180deg, #1e293b 0%, #0f172a 100%);
        }
        .sidebar-link {
            transition: all 0.3s ease;
            border-radius: 0.5rem;
        }
        .sidebar-link:hover, .sidebar-link.active {
            background-color: rgba(59, 130, 246, 0.2);
            border-left: 3px solid #3b82f6;
        }
        .stat-card {
            transition: all 0.3s ease;
            border-left: 4px solid;
        }
        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .tab-btn.active {
            background-color: #3b82f6;
            color: white;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="flex min-h-screen">
        <!-- Sidebar -->
        <div class="sidebar w-64 text-white p-6 hidden md:block">
            <div class="flex items-center justify-between mb-10">
                <div class="flex items-center space-x-3">
                    <i class="fas fa-laptop-code text-2xl text-blue-400"></i>
                    <h1 class="text-xl font-bold">Tecno<span class="text-blue-400">PIA</span></h1>
                </div>
            </div>
            
            <!-- Información del docente -->
            <div class="mb-8 p-4 bg-blue-900/30 rounded-lg">
                <div class="flex items-center space-x-3 mb-3">
                    <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center">
                        <i class="fas fa-user-tie"></i>
                    </div>
                    <div>
                        <h3 id="docente-nombre" class="font-semibold">Docente</h3>
                        <p class="text-sm text-gray-300" id="docente-email">Cargando...</p>
                    </div>
                </div>
                <div class="text-sm text-gray-300">
                    <p><i class="fas fa-school mr-2"></i> <span id="docente-escuela">Institución</span></p>
                </div>
            </div>
            
            <!-- Menú de navegación -->
            <nav class="space-y-2">
                <a href="dashboard.html" class="sidebar-link flex items-center space-x-3 p-3 active">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
                
                <a href="sistemas/grupos.html" class="sidebar-link flex items-center space-x-3 p-3">
                    <i class="fas fa-users"></i>
                    <span>Mis Grupos</span>
                </a>
                
                <a href="sistemas/evaluacion.html" class="sidebar-link flex items-center space-x-3 p-3">
                    <i class="fas fa-clipboard-check"></i>
                    <span>Evaluación</span>
                </a>
                
                <a href="sistemas/reportes.html" class="sidebar-link flex items-center space-x-3 p-3">
                    <i class="fas fa-file-pdf"></i>
                    <span>Reportes</span>
                </a>
                
                <a href="index.html" class="sidebar-link flex items-center space-x-3 p-3">
                    <i class="fas fa-info-circle"></i>
                    <span>Información</span>
                </a>
            </nav>
            
            <!-- Footer del sidebar -->
            <div class="mt-auto pt-6 border-t border-gray-700">
                <button onclick="cerrarSesion()" class="w-full flex items-center justify-center space-x-2 p-3 bg-red-900/30 hover:bg-red-900/50 rounded-lg transition">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Cerrar Sesión</span>
                </button>
            </div>
        </div>
        
        <!-- Contenido principal -->
        <div class="flex-1">
            <!-- Header móvil -->
            <div class="bg-white shadow p-4 md:hidden">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <i class="fas fa-laptop-code text-xl text-blue-600"></i>
                        <h1 class="text-lg font-bold">Tecno<span class="text-blue-600">PIA</span></h1>
                    </div>
                    <button id="menu-toggle" class="text-gray-600">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
            
            <!-- Dashboard principal -->
            <div class="p-4 md:p-6">
                <!-- Header -->
                <div class="mb-8">
                    <h2 class="text-2xl md:text-3xl font-bold text-gray-800">Dashboard del Docente</h2>
                    <p class="text-gray-600" id="dashboard-subtitle">Bienvenido al sistema de evaluación tecnológica</p>
                </div>
                
                <!-- Tabs -->
                <div class="flex flex-wrap gap-2 mb-8">
                    <button class="tab-btn active px-4 py-2 bg-blue-600 text-white rounded-lg" onclick="cambiarTab('resumen')">
                        Resumen
                    </button>
                    <button class="tab-btn px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300" onclick="cambiarTab('grupos')">
                        Mis Grupos
                    </button>
                    <button class="tab-btn px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300" onclick="cambiarTab('evaluaciones')">
                        Evaluaciones Recientes
                    </button>
                </div>
                
                <!-- Tab: Resumen -->
                <div id="tab-resumen" class="tab-content active">
                    <!-- Estadísticas -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
                        <div class="stat-card bg-white p-6 rounded-xl shadow border-l-4 border-blue-500">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm">Grupos Activos</p>
                                    <h3 class="text-3xl font-bold text-gray-800" id="total-grupos">0</h3>
                                </div>
                                <div class="p-3 bg-blue-100 rounded-full">
                                    <i class="fas fa-users text-blue-600 text-xl"></i>
                                </div>
                            </div>
                            <p class="text-sm text-gray-500 mt-2">
                                <span id="total-estudiantes">0</span> estudiantes en total
                            </p>
                        </div>
                        
                        <div class="stat-card bg-white p-6 rounded-xl shadow border-l-4 border-yellow-500">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm">Evaluaciones Pendientes</p>
                                    <h3 class="text-3xl font-bold text-gray-800" id="evaluaciones-pendientes">0</h3>
                                </div>
                                <div class="p-3 bg-yellow-100 rounded-full">
                                    <i class="fas fa-clipboard-check text-yellow-600 text-xl"></i>
                                </div>
                            </div>
                            <p class="text-sm text-gray-500 mt-2">
                                Por calificar esta semana
                            </p>
                        </div>
                        
                        <div class="stat-card bg-white p-6 rounded-xl shadow border-l-4 border-green-500">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm">Asistencia Hoy</p>
                                    <h3 class="text-3xl font-bold text-gray-800" id="asistencia-hoy">0%</h3>
                                </div>
                                <div class="p-3 bg-green-100 rounded-full">
                                    <i class="fas fa-calendar-check text-green-600 text-xl"></i>
                                </div>
                            </div>
                            <p class="text-sm text-gray-500 mt-2">
                                <span id="fecha-actual">...</span>
                            </p>
                        </div>
                        
                        <div class="stat-card bg-white p-6 rounded-xl shadow border-l-4 border-purple-500">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm">Reportes Listos</p>
                                    <h3 class="text-3xl font-bold text-gray-800" id="reportes-listos">0</h3>
                                </div>
                                <div class="p-3 bg-purple-100 rounded-full">
                                    <i class="fas fa-file-pdf text-purple-600 text-xl"></i>
                                </div>
                            </div>
                            <p class="text-sm text-gray-500 mt-2">
                                Boletines del mes actual
                            </p>
                        </div>
                    </div>
                    
                    <!-- Acciones rápidas -->
                    <div class="bg-white rounded-xl shadow p-6 mb-8">
                        <h3 class="text-xl font-bold mb-4 text-gray-800">Acciones Rápidas</h3>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <a href="sistemas/grupos.html?action=new" class="p-4 bg-blue-50 rounded-lg text-center hover:bg-blue-100 transition cursor-pointer">
                                <i class="fas fa-plus-circle text-2xl text-blue-600 mb-2"></i>
                                <p class="font-semibold">Nuevo Grupo</p>
                                <p class="text-sm text-gray-600">Crear grupo de estudiantes</p>
                            </a>
                            
                            <a href="sistemas/evaluacion.html" class="p-4 bg-green-50 rounded-lg text-center hover:bg-green-100 transition cursor-pointer">
                                <i class="fas fa-clipboard-list text-2xl text-green-600 mb-2"></i>
                                <p class="font-semibold">Evaluar TC</p>
                                <p class="text-sm text-gray-600">Trabajo cotidiano</p>
                            </a>
                            
                            <a href="#" onclick="registrarAsistencia()" class="p-4 bg-yellow-50 rounded-lg text-center hover:bg-yellow-100 transition cursor-pointer">
                                <i class="fas fa-calendar-alt text-2xl text-yellow-600 mb-2"></i>
                                <p class="font-semibold">Asistencia</p>
                                <p class="text-sm text-gray-600">Registrar hoy</p>
                            </a>
                            
                            <a href="sistemas/reportes.html" class="p-4 bg-purple-50 rounded-lg text-center hover:bg-purple-100 transition cursor-pointer">
                                <i class="fas fa-file-export text-2xl text-purple-600 mb-2"></i>
                                <p class="font-semibold">Reportes</p>
                                <p class="text-sm text-gray-600">Generar PDF</p>
                            </a>
                        </div>
                    </div>
                    
                    <!-- Grupos activos -->
                    <div class="bg-white rounded-xl shadow p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-xl font-bold text-gray-800">Mis Grupos Activos</h3>
                            <a href="sistemas/grupos.html" class="text-blue-600 hover:text-blue-800 font-medium">
                                Ver todos →
                            </a>
                        </div>
                        
                        <div id="grupos-activos-container">
                            <div class="text-center py-8 text-gray-500">
                                <i class="fas fa-users text-4xl mb-4"></i>
                                <p>No hay grupos activos</p>
                                <p class="text-sm mt-2">Crea tu primer grupo para comenzar</p>
                                <a href="sistemas/grupos.html?action=new" class="mt-4 inline-block px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                                    Crear Primer Grupo
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Tab: Mis Grupos -->
                <div id="tab-grupos" class="tab-content">
                    <div class="bg-white rounded-xl shadow p-6">
                        <h3 class="text-xl font-bold mb-6 text-gray-800">Todos mis grupos</h3>
                        <div id="todos-grupos-container">
                            <!-- Se cargará dinámicamente -->
                        </div>
                    </div>
                </div>
                
                <!-- Tab: Evaluaciones Recientes -->
                <div id="tab-evaluaciones" class="tab-content">
                    <div class="bg-white rounded-xl shadow p-6">
                        <h3 class="text-xl font-bold mb-6 text-gray-800">Evaluaciones Recientes</h3>
                        <div id="evaluaciones-recientes-container">
                            <div class="text-center py-8 text-gray-500">
                                <i class="fas fa-clipboard-list text-4xl mb-4"></i>
                                <p>No hay evaluaciones recientes</p>
                                <p class="text-sm">Realiza tu primera evaluación</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Scripts -->
    <script>
        // Datos de ejemplo (después se conectarán a localStorage)
        const datosDemo = {
            docente: {
                nombre: "Ana María Rodríguez",
                email: "anamaria@institucion.ed.cr",
                escuela: "Liceo de San José"
            },
            grupos: [
                {
                    id: 1,
                    nombre: "5°A Tecnología",
                    grado: "5°",
                    ciclo: "ciclo2",
                    estudiantes: 28,
                    evaluacionesPendientes: 3
                },
                {
                    id: 2,
                    nombre: "7°B Informática",
                    grado: "7°",
                    ciclo: "ciclo3",
                    estudiantes: 25,
                    evaluacionesPendientes: 5
                }
            ],
            estadisticas: {
                totalEstudiantes: 53,
                evaluacionesCompletadas: 12,
                asistenciaPromedio: 92
            }
        };
        
        // Inicialización
        document.addEventListener('DOMContentLoaded', function() {
            // Cargar datos del docente
            const docente = datosDemo.docente;
            document.getElementById('docente-nombre').textContent = docente.nombre;
            document.getElementById('docente-email').textContent = docente.email;
            document.getElementById('docente-escuela').textContent = docente.escuela;
            document.getElementById('dashboard-subtitle').textContent = `Bienvenido/a, ${docente.nombre}`;
            
            // Configurar fecha actual
            const hoy = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('fecha-actual').textContent = hoy.toLocaleDateString('es-ES', options);
            
            // Cargar estadísticas
            cargarEstadisticas();
            cargarGruposActivos();
            
            // Menú móvil
            document.getElementById('menu-toggle')?.addEventListener('click', function() {
                document.querySelector('.sidebar').classList.toggle('hidden');
            });
        });
        
        // Funciones de tabs
        function cambiarTab(tabId) {
            // Ocultar todos los tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Desactivar todos los botones
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
                btn.classList.remove('bg-blue-600', 'text-white');
                btn.classList.add('bg-gray-200', 'text-gray-700', 'hover:bg-gray-300');
            });
            
            // Mostrar tab seleccionado
            document.getElementById('tab-' + tabId).classList.add('active');
            
            // Activar botón seleccionado
            event.target.classList.remove('bg-gray-200', 'text-gray-700', 'hover:bg-gray-300');
            event.target.classList.add('bg-blue-600', 'text-white', 'active');
            
            // Cargar datos específicos del tab
            if (tabId === 'grupos') {
                cargarTodosGrupos();
            } else if (tabId === 'evaluaciones') {
                cargarEvaluacionesRecientes();
            }
        }
        
        function cargarEstadisticas() {
            document.getElementById('total-grupos').textContent = datosDemo.grupos.length;
            document.getElementById('total-estudiantes').textContent = datosDemo.estadisticas.totalEstudiantes;
            document.getElementById('evaluaciones-pendientes').textContent = datosDemo.grupos.reduce((sum, g) => sum + g.evaluacionesPendientes, 0);
            document.getElementById('asistencia-hoy').textContent = datosDemo.estadisticas.asistenciaPromedio + '%';
            document.getElementById('reportes-listos').textContent = datosDemo.grupos.length;
        }
        
        function cargarGruposActivos() {
            const container = document.getElementById('grupos-activos-container');
            
            if (datosDemo.grupos.length === 0) {
                return; // Ya tiene el mensaje por defecto
            }
            
            let html = '<div class="grid grid-cols-1 md:grid-cols-2 gap-4">';
            
            datosDemo.grupos.forEach(grupo => {
                html += `
                    <div class="border rounded-lg p-4 hover:border-blue-300 hover:shadow transition">
                        <div class="flex justify-between items-start mb-3">
                            <div>
                                <h4 class="font-bold text-lg">${grupo.nombre}</h4>
                                <p class="text-gray-600">${grupo.grado} • ${grupo.estudiantes} estudiantes</p>
                            </div>
                            <span class="px-2 py-1 text-xs font-semibold rounded-full 
                                ${grupo.ciclo === 'ciclo1' ? 'bg-blue-100 text-blue-800' : 
                                  grupo.ciclo === 'ciclo2' ? 'bg-green-100 text-green-800' : 
                                  'bg-purple-100 text-purple-800'}">
                                Ciclo ${grupo.ciclo.replace('ciclo', '')}
                            </span>
                        </div>
                        
                        <div class="flex justify-between items-center text-sm text-gray-600 mb-3">
                            <span><i class="fas fa-clipboard-check mr-1"></i> ${grupo.evaluacionesPendientes} pendientes</span>
                            <span><i class="fas fa-user-check mr-1"></i> 92% asistencia</span>
                        </div>
                        
                        <div class="flex space-x-2">
                            <a href="sistemas/evaluacion.html?grupo=${grupo.id}" 
                               class="flex-1 text-center px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm">
                                <i class="fas fa-play mr-1"></i> Evaluar
                            </a>
                            <a href="sistemas/grupos.html?id=${grupo.id}" 
                               class="flex-1 text-center px-3 py-2 border border-gray-300 rounded hover:bg-gray-50 text-sm">
                                <i class="fas fa-eye mr-1"></i> Ver
                            </a>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            container.innerHTML = html;
        }
        
        function cargarTodosGrupos() {
            const container = document.getElementById('todos-grupos-container');
            container.innerHTML = '<p class="text-gray-500">Cargando grupos...</p>';
            
            // Simular carga
            setTimeout(() => {
                container.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <i class="fas fa-database text-4xl mb-4"></i>
                        <p>Base de datos de grupos</p>
                        <p class="text-sm">Esta funcionalidad se implementará completamente en la versión 1.0</p>
                    </div>
                `;
            }, 500);
        }
        
        function cargarEvaluacionesRecientes() {
            const container = document.getElementById('evaluaciones-recientes-container');
            
            // Datos de ejemplo
            const evaluaciones = [
                { fecha: '15 Mar 2024', grupo: '5°A Tecnología', tipo: 'Trabajo Cotidiano', completada: true },
                { fecha: '14 Mar 2024', grupo: '7°B Informática', tipo: 'Prueba Ejecución', completada: true },
                { fecha: '10 Mar 2024', grupo: '5°A Tecnología', tipo: 'Tareas', completada: false }
            ];
            
            let html = '<div class="space-y-4">';
            
            evaluaciones.forEach(eval => {
                html += `
                    <div class="flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50">
                        <div>
                            <h4 class="font-medium">${eval.tipo}</h4>
                            <p class="text-sm text-gray-600">${eval.grupo} • ${eval.fecha}</p>
                        </div>
                        <span class="px-3 py-1 text-xs font-semibold rounded-full 
                            ${eval.completada ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'}">
                            ${eval.completada ? 'Completada' : 'Pendiente'}
                        </span>
                    </div>
                `;
            });
            
            html += '</div>';
            container.innerHTML = html;
        }
        
        function registrarAsistencia() {
            alert('Funcionalidad de asistencia - Próximamente disponible en la versión 1.1');
        }
        
        function cerrarSesion() {
            if (confirm('¿Estás seguro de cerrar sesión?')) {
                // Aquí se limpiaría la sesión
                window.location.href = 'index.html';
            }
        }
    </script>
</body>
</html>
